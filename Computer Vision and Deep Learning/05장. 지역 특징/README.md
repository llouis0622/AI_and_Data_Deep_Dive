# 1. 발상

## 1. 개요

- 두 영상에서 특징점 추출 → 매칭을 통해 해당하는 특징점 쌍 찾기
- 에지를 연결한 경계선에서 모퉁이를 찾아 특징점으로 사용

## 2. 지역 특징

- 물체의 같은 곳이 두 영상 모두에서 특징점으로 추출되어야 함
- (위치, 스케일, 방향, 특징 기술자)
- 위치, 스케일 → 검출 단계에서 알아냄
- 방향, 특징 기술자 → 기술 단계에서 알아냄

## 3. 지역 특징 조건

- 반복성 : 같은 물체가 서로 다른 두 영상에 나타났을 때 두 영상 모두 같은 위치에서 높은 확률로 검출되어야 함
- 불변성 : 물체에 이동, 회전, 스케일, 조명 변환이 일어나도 특징 기술자의 값은 비슷해야 함
- 분별력 : 물체의 다른 곳에서 추출된 특징과 두드러지게 달라야 함
- 지역성 : 작은 영역을 중심으로 특징 벡터를 추출해야 물체에 가림이 발생해도 매칭이 안정적으로 동작함
- 적당한 양 : 물체를 추적하기 위해 몇 개의 대응점만 있으면 됨
- 계산 효율 : 계산 시간이 매우 중요한 응용이 다수

# 2. 이동과 회전 불변한 지역 특징

## 1. 모라벡 알고리즘

- 제곱차의 합(SSD) : 화소마다 적용, 각 화소에서 v, u를 각각 -1, 0, 1로 변화시켜 3*3 맵 생성
- 상하좌우에 있는 4개의 화소의 최소값을 특징 가능성 값으로 취함

## 2. 해리스 특징점

- 잡음 대처 → 가우시안 추가 적용
- 테일러 확장 → 2차 모멘트 행렬 계산
- 정수뿐 아니라 실수도 가능 → 모든 값에 계산 가능
- 어떤 화소 주위의 영상 구조 표현 → 지역 특징 여부 판단 가능
- 극점 → 자신의 8개 이웃보다 큰 값을 갖는 화소를 특징점으로 선택

## 3. 해리스 특징점의 분석

- 세 특징점이 모두 삼각형이라는 물체의 모퉁이에 위치
- 모퉁이뿐 아니라 블롭도 많이 검출함
- 이동에 등변, 회전에 불변, 스케일에 불변하지 않음

# 3. 스케일 불변한 지역 특징

## 1. 스케일 공간

- 입력 영상으로부터 다중 스케일 영상 구성
- 영상에 적절한 미분 영상 적용 → 다중 스케일 미분 영상 구함
- 미분 영상에서 극점을 찾아 특징점으로 취함
- 거리가 멀어지면 세부 내용이 점점 흐려지는 현상 모방
- 거리가 멀어짐에 따라 물체의 크기가 작아지는 현상 모방

# 4. SIFT

## 1. 검출

- 다중 스케일 영상 구축
- 다중 스케일 영상에 미분 적용
- 극점 검출

## 2. SIFT 기술자

- 기술자 : 특징점 주위를 살펴 풍부한 정보를 가진 특징 벡터 추출
- 물체 회전 → 기준 방향 설정 이후 방향을 중심으로 특징 추출
- 조명 불변서 고려

# 5. 매칭

## 1. 매칭 전략

- 매칭 문제 → 가장 유사한 특징점을 찾아 쌍을 맺어줌
- 두 기술자의 거리가 임계값보다 작으면 매칭되었다고 간주 → 고정 임계값 방식
- 최근접 이웃
- 최근접 이웃 거리 비율

## 2. 매칭 성능 측정

- 정량적 성능 : 알고리즘을 개선하거나 최선의 알고리즘을 선택하기 위한 기준
- 정밀도 : 매칭 알고리즘이 긍정, 매칭 쌍으로 예측한 개수 중에 진짜 쌍인 비율
- 재현율 : 진짜 쌍 중에 알고리즘이 찾아낸 쌍의 비율
- ROC 곡선 : 가로축을 거짓 긍정률, 세로축을 참 긍정률로 설정한 곡선
- AUC : ROC 곡선의 아래쪽 면적

## 3. 빠른 매칭

- 이진 탐색 트리, 해싱 → 대용량 데이터 빠르게 탐색 가능
- kd 트리 : 이진 탐색 트리를 특징점 매칭에 적합하게 개조
- 위치 의존 해싱 : 해싱에서 충돌 확률을 최소화, 비슷한 특징 벡터가 같은 칸에 담길 확률 높임
- FLANN, FAISS : 빠른 매칭을 보장하는 라이브러리

# 6. 호모그래피 추정

## 1. 문제의 이해

- 투영 변환 : 3차원 점이 2차원 평면으로 변환되는 기하 관계
- 어파인 변환 : 이동, 회전, 크기 변환을 조합
- z축을 무시하고 변환하여 이루어지는 투영 변환 → 평면 호모그래피

## 2. 강인한 호모그래피 추정

- 최소평균제곱오차(LMSE) : 모든 점의 오차를 평균 → 최소인 값 찾기
- 모든 쌍의 오차 계산 → 중앙값 사용
- RANSAC : 샘플에 섞여있는 아웃라이어를 회피하면서 최적해를 구하는 일반 기법
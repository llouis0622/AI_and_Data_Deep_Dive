# 03장. 관계형 데이터 모델

# 1. 관계형 데이터 모델

## 1. 데이터 모델의 구성 요소

- 데이터 모델(Data Model) : 현실 세계의 데이터를 명세하는 고유한 표현 방식, 데이터 모델링을 위한 도구
- 데이터 구조(Data Structure) : 데이터를 어떤 형태로 저장하는지를 표현하는 추상적 표현
- 연산(Operation) : 개념적인 데이터 구조 안의 데이터를 어떤 방식으로 처리하는지를 표현
- 제약 조건(Constraint) : 데이터 구조 안에 데이터를 저장할 때의 구조적 제약 사항과 연산을 적용할 때의 행위적 제약 사항 표현

## 2. 관계형 데이터 모델의 구성 요소

- 관계형 데이터 모델 : 테이블 형테의 릴레이션을 통해 데이터를 저장하고 데이터 간의 관련성 표현
- 연산 : 관계 대수
- 데이터 구조 : 릴레이션
- 제약 조건 : 무결성 제약 조건

# 2. 관계형 데이터 구조

## 1. 관계형 데이터 구조의 개념

### 1. 릴레이션(Relation)

- 2차원 테이블 형태의 단순 구조에 데이터를 저장하는 방식

### 2. 속성과 튜플, 도메인

- 속성(Attribute) : 테이블의 열, 릴레이션이 표현하는 대상의 주요 특성들을 서로 다른 이름으로 구별하여 표현
- 튜플(Tuple) : 테이블의 행, 현실 세계의 개체, 각 속성 값들의 조합으로 구성
- 도메인(Domain) : 각 속성이 취할 수 있는 모든 값들의 집합, 데이터 값들의 유형과 크기, 범위 정의

### 3. 카디널리티와 차수

- 카디널리티(Cardinality) : 릴레이션 안의 전체 튜플의 개수
- 차수(Degree) : 릴레이션을 구성하는 전체 속성의 개수
- 릴레이션의 최소 카디널리티 0, 최소 차수 1

## 2. 릴레이션의 구성 요소

### 1. 릴레이션 스키마(Relation Schema)

- 특정 릴레이션의 논리적 구조
- 릴레이션의 이름과 릴레이션 안에 포함된 모든 속성의 이름들로 정의
- 릴레이션 내포(Relation Intension)

### 2. 릴레이션 인스턴스(Relation Instance)

- 어느 한 시점에 릴레이션에 존재하는 튜플들의 집합
- 테이블의 첫 번째 행인 헤더 부분을 제외한 나머지 모든 행들의 집합
- 릴레이션 외연(Relation Extension)

### 3. 데이터베이스 스키마와 데이터베이스 인스턴스

- 데이터베이스 스키마(Database Schema) : 릴레이션 스키마들의 모임, 정적
- 데이터베이스 인스턴스(Database Instance) : 특정 시점에서의 모든 릴레이션 인스턴스들의 모임, 동적

## 3. 릴레이션의 특성

### 1. 튜플의 유일성(Uniqueness of Tuple)

- 릴레이션에 포함된 튜플은 모두 다름
- 모든 튜플은 다른 튜플과 구별되는 유일한 속성값 필요

### 2. 튜플의 무순서성(No-Ordering of Tuple)

- 릴레이션의 튜플 사이에는 순서가 의미 없음

### 3. 속성의 무순서성(No-Ordering of Attribute)

- 릴레이션의 속성 사이에는 순서가 의미 없음

### 4. 속성의 원자성(Atomicity of Attribute)

- 릴레이션을 구성하는 모든 속성 값은 의미적으로 더 이상 분해할 수 없는 하나의 원자 값만을 가짐
- 다중 값 속성이나 복합 속성을 허용하지 않음

# 3. 제약 조건

## 1. 릴레이션의 키

- 모든 튜플은 속성 값이 하나 이상이 서로 다름
- 키(Key) : 각 튜플을 유일하게 식별할 수 있는 하나 이상의 속성 집합

### 1. 후보키(CK, Candidate Key)

- 튜플을 유일하게 식별할 수 있는 속성들의 최소 집합
- 유일성(Uniqueness), 최소성(Minimality) 조건 모두 만족
- 꼭 필요한 최소한의 속성만으로 구성된 키

### 2. 슈퍼키(SK, Super Key)

- 튜플을 유일하게 식별할 수 있는 속성 집합
- 식별을 위해 꼭 필요한 속성이 아니어도 포함 가능
- 유일성 조건 만족

### 3. 기본키(PK, Primary Key)

- 튜플을 대표하도록 선정된 후보키
- 여러 후보키 중에서 하나 선택
- 기본키 선정 기준
    - 값이 자주 변경되지 않는 정적인 속성으로 구성된 후보키
    - 널 값을 가질 수 없는 속성으로 구성된 후보키
    - 속성 개수가 작은 후보키
    - 속성 값의 물리적 크기가 작은 후보키

### 4. 대체키(AK, Alternate Key)

- 기본키로 선정되지 못한 후보키
- 기본키로 지정되지 않은 나머지 후보키

### 5. 대리키(Surrogate Key)

- 후보키 중에서 적절한 기본키 선정이 어려울 경우, 일련번호 같은 인위적인 속성을 추가로 생성하여 기본키로 지정하는 경우
- 인공키(Artificial Key)
- 후보키가 여러 속성의 조합으로 너무 복잡하거나 속성 값의 물리적 크기가 너무 커서 성능 저하가 우려될 때 사용

### 6. 외래키(Foreign Key)

- 특정 릴레이션의 기본키를 참조하는 속성 집합
- 같은 값을 기본키 값으로 갖는 튜플과의 관계를 자연스럽게 표현
- 자식 릴레이션(Child Relation) : 참조하는 릴레이션(Referencing Relation)
- 부모 릴레이션(Parent Relation) : 참조되는 릴레이션(Referenced Relation)
- 참조(Referencing) : 새로운 속성 값을 입력할 때 지정한 특정 속성 값으로 이미 입력된 값들 중 하나만을 입력할 수 있음

## 2. 무결성 제약 조건(Integrity Constraint)

- 데이터 무결성(Data Integrity) : 데이터의 일관성과 정확성에 손상이 없도록 유지되는 특성
- 무결성 제약 조건 : 관계형 데이터 모델에서 릴레이션 안의 모든 데이터들을 의미적으로 흠 없이 항상 정확하고 완전한 상태로 유지하기 위해 적용해야 할 제약 사항
- 개별 응용 프로그램 안에 코드를 추가하여 구현
- DBMS 안의 무결성 제약 조건을 설정하여 구현

### 1. 개체 무결성 제약 조건(Entity Integrity Constraint)

- 기본키로 지정한 모든 속성은 널 값을 가질 수 없고 릴레이션 안에서 중복되지 않는 유일한 값을 가져야 함
- 기본키 제약 조건(Primary Key Constraint)
- 기본키 → 개체 식별자(Entity Identifier) 역할

### 2. 참조 무결성 제약 조건(Referential Integrity Constraint)

- 외래키로 지정한 속성은 참조하는 릴레이션의 기본키 속성 값과 일치하는 값이나 널 값 만을 가져야 함
- 외래키 제약 조건(Foreign Key Constraint)
- 의미적으로 연관된 두 릴레이션 튜플 사이의 일관성 유지를 위해 사용
- 기본키 → 개체 참조자(Entity Referer) 역할

### 3. 도메인 무결성 제약 조건(Domain Integrity Constraint)

- 튜플의 모든 속성 값이 각 속성의 도메인에 속한 값만을 취해야 함

### 4. 유일성 제약 조건(Uniqueness Constraint)

- 모든 키 속성 값이 서로 중복되지 않고 유일해야 함
- 키 제약 조건(Key Constraint)

# 4. 관계 연산(Relation Operation)

- 관계형 데이터 모델에서 릴레이션을 조작하기 위한 연산

### 1. 관계 대수(Relational Algebra)

- 사용자가 필요로 하는 데이터를 획득하는 절차, 연산들의 적용 순서 명세
- 절차적(Procedural) 표현 방법

### 2. 관계 해석(Relational Calculus)

- 사용자가 필요한 데이터가 무엇인지, 연산들의 최종 결과만 명세
- 선언적(Declarative) 표현 방법, 비절차적(Nonprocedural)

### 3. 관계 대수와 관계 해석의 차이점

- 관계 대수
    - 어떻게에 중점
    - 질의 결과를 추출하기 위한 방법을 일련의 연산들로 표현
    - 관계형 데이터 모델을 위한 기본 연산 집합 정의
- 관계 해석
    - 무엇을에 중점
    - 결과에 포함해야할 내용이 어떤 것인지를 표현
    - 상위 수준의 관계 질의를 표현하기 위한 표기 방식 정의
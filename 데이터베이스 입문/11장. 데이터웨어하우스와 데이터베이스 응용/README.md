# 11장. 데이터웨어하우스와 데이터베이스 응용

# 1. 데이터웨어하우스 개념

## 1. 데이터웨어하우스의 출현 배경

- 정보의 위기(Information Crisis) : 풍요속의 빈곤처럼 데이터는 넘쳐나는데 정작 필요한 정보는 얻을 수 없는 상황
- 거미줄 구조(Sipder Web) : 시간이 흐를수록 데이터가 쌓이면서 데이터양은 점차 증가하고 복잡해짐
- 데이터의 비통합성 : 연관된 데이터들이 통합되어 있지 않음
- 데이터의 비일관성 : 데이터가 중복되어 존재
- 데이터의 비신뢰성 : 데이터 생성 주기나 추출 알고리즘에 따라서 연관된 데이터가 서로 일치하지 않음
- 데이터의 단기성 : 대량의 데이터가 저장되어 있지만 현 시점 위주의 단기간 데이터가 대부분임
- 데이터의 비생산성 : 높은 개발 비용 요구

### 1. 데이터웨어하우스의 등장

- 분석을 위한 새로운 저장소 구축

## 2. 데이터웨어하우스(Data Warehouse)의 정의

- 의사결정을 위한 효율적인 분석 기반을 제공하는 통합 데이터 저장소
- 주제 지향성(Subject-Oriented) : 분석하고자 하는 주제 중심으로 구성
- 통합성(Integrated) : 통일된 형식으로 변환
- 시계열성(Time-Variant) : 스냅샷 데이터들이 축적됨
- 비휘발성(Nonvolatile) : 수정이나 삭제가 거의 없는 일종의 검색 전용 데이터베이스

### 1. 데이터베이스와 데이터웨어하우스 비교

- 데이터베이스
    - 목적 : 정보 운영(트랜잭션처리)
    - 사용자 : 고객지향적(실무자, 하위관리자)
    - 구조 설계 : ER 모델링, 업무 중심 설계
    - 대상 : 현재 데이터(동적)
    - 접근 : 읽기/쓰기(수정가능)
    - 관점 : 상세, 평면적
    - 처리 튜플수 : 수백 건
    - 사용자수 : 수천 명
    - 응답시간 : 초 단위
    - 용량 : 메가/기가 바이트
    - 갱신주기 : 지속적 갱신
    - 처리 : OLTP(운영환경)
- 데이터웨어하우스
    - 목적 : 정보 분석(의사결정지원)
    - 사용자 : 시장지항적(상위관리자, 경영자, 분석가)
    - 구조 설계 : 차원 모델링, 주제 중심 설계
    - 대상 : 최근/과거데이터(정적)
    - 접근 : 읽기 전용(수정불가, 비휘발성)
    - 관점 : 요약, 다차원적
    - 처리 튜플수 : 수백만 건
    - 사용자수 : 수백 명
    - 응답시간 : 분 단위
    - 용량 : 기가/테라바이트
    - 갱신주기 : 주기적 갱신
    - 처리 : OLAP(분석환경)

## 3. 데이터웨어하우스 시스템

- 3-계층 구조(3-Tier Architecture)
    - 원본 데이터 계층(Source Data) : 기존 데이터베이스 안의 운영 데이터와 비정형 데이터 그리고 외부 데이터를 포함한 다양한 데이터 원본 포함
    - 데이터 저장소 계층 : 분석 데이터 저장소
    - 클라이언트 계층 : 다양한 유형의 도구 포함

### 1. 데이터웨어하우스 구축

- 상향식 : 소규모의 데이터 마트들을 순차적으로 구축 → 통합하여 전사적 데이터웨어하우스 완성
- 하향식 : 전사적 데이터웨어하우스 구축 → 필요한 경우 순차적으로 데이터 마트 추가
- 절충식 : 기획과 설계 → 하향식 구축 방식, 실제 구축 → 상향식 구축 방식

# 2. 데이터웨어하우스 설계

## 1. 다차원 모델링(Multi-Dimensional Modeling)

- 높은 연관성을 갖는 데이터들을 데이터웨어하우스 안에서 다차원성을 유지하도록 구조화하는 것
    - 개인 파일, 외부 매체 등의 다양한 원본으로부터 수집된 데이터들을 통합할 수 있는 구조
    - 조회 중심의 데이터 구조
    - 핵심 주제별로 데이터 저장소 구성
    - 대부분의 데이터 키에 시간 정보 포함
    - 비정규화를 통해 데이터 중복 허용
    - 여러 수준으로 집계 요약한 데이터들이 다량으로 존재
    - 빠른 데이터 접근을 위해 상대적으로 많은 색인 필요
- 다차원 데이터베이스 → 데이터 큐브 개념
- 관계형 데이터베이스 → 스타 스키마 개념

### 1. 다차원 데이터베이스(MDB, Multi-Dimensional Database)

- 관계형 데이터베이스의 한계점을 극복하기 위해 개발된 분석 전용 데이터베이스
- 다차원 데이터베이스 구조
    - 큐브 : 특별한 다차원 배열 구조의 셀
    - 큐브 셀 : 모든 큐브 좌표의 교차점 개수, 차원 멤버들의 모든 가능한 조합 수만큼 존재
    - 다차원 분석 지원 연산, 빠른 속도
    - 해싱 → 큐브 셀 위치 계산, 캐싱 → 주기억 장치에 많은 데이터 유지
- 다차원 질의(Multi-Dimensional Query) : 다차원 데이터베이스의 어느 영역을 분석하고자 하는지를 명세
    - 큐브를 자신이 원하는 모양으로 절단하여 살펴보는 것
    - 슬라이싱 : 큐브 단면을 분석하는 것
    - 다이싱 : 큐브 중에서 보고자 하는 부분만을 선별함으로써 작은 부분 큐브 형태의 영역 분석
    - 피보팅 : 큐브의 축 위치를 바꾸어 같은 분석 결과 확인

### 2. 다차원 모델

- 데이터 큐브(Data Cube) : 다차원 모델의 기본 구조
    - 차원(Dimension) : 데이터 큐브의 각 축
    - 차원 멤버(Dimension Member) : 축 좌표
    - 셀(Cell) : 축 좌표들의 조합
- 차원(Dimension) : 데이터에 대한 하나의 분석 관점 또는 분석 시각 표현
    - 분석 관점 다양, 데이터 간 상호 연관성 높음 → 차원 개수 증가
- 개념 계층(Concept Hierarchy) : 같은 차원 안의 수준들 간의 수직적 상하 관계
    - 차원의 수준 : 데이터를 기술하는 상세 정도
    - 다중-개념 계층 : 하나의 차원이 둘 이상의 개념 계층을 가짐

## 2. 스타 스키마

### 1. 스타 스키마 : 관계형 데이터베이스 기반의 차원 모델링

- 차원 모델링(Dimensional Modeling) : 관계형 스키마 구조에 차원성을 부여하는 설계 방법
    - 주제 중심의 스키마 구조로 변환
    - 오직 분석을 빠르고 효과적으로 지원하기 위한 스키마 구조 정의
- 스타 스키마(Star Schema) : 관계형 데이터베이스 안에 가상의 데이터 큐브를 만ㄷ르기 위한 차원 모델링의 대표적 모델
    - 비정규화된 관계형 스키마의 특수한 형태
    - 스타 조인 스키마, 별 스키마, 성형 스키마
    - 하나의 사실 테이블을 중심으로 주위에 여러 개의 차원 테이블들이 연결

### 2. 사실과 차원

- 사실 : 매 순간 조직에서 발생하는 측정값, 집계값
- 차원 : 사실을 바라보는 특정 관점
- 스타 조인 : 일대다 참조 관계를 이용하여 사실 테이블과 차원 테이블들을 하나로 결합

## 3. 스노우플레이크 스키마(Snowflake Schema)

- 데이터 중복을 줄이기 위해 차원 테이블을 정규화한 구조
- 눈송이 스키마

# 3. OLAP(On Line Analytical Processing, 온라인 분석 처리)

## 1. OLAP의 정의

- 데이터베이스의 OLTP(On Line Transaction Processing)에 대응되는 개념
- 최종 사용자가 직접 다양한 분석 관점의 흐름에 따라 대규모의 다차원 데이터를 온라인에서 동적으로 분석하고 보고서를 만드는 모든 과정
- 다차원 공유 정보에 대한 신속한 분석

### 1. OLAP의 특성

- 다차원성 : 사용자들이 관심 주제별로 다양한 관점에서 접근 가능]
- 직접성 : 의사결정자가 개발자의 도움 없이도 스스로 직접 분석
- 대화성 : 사용자의 반복적인 질문을 통해 의사 결정에 필요한 정보들을 발견
- 비정형성 : 사용자가 즉각적으로 보고서를 자유롭게 만들 수 있음
- 자동성 : 메타 데이터를 활용하여 몇 번의 조작만으로도 원하는 분석 보고서 생성 가능

## 2. OLAP의 종류

### 1. 다차원 OLAP

- MOLAP(Multi-Dimensional OLAP)
- 큐브에 데이터를 저장하는 다차원 데이터베이스로부터 직접 OLAP를 수행
- 저장소 : MDB
- 모델 : 데이터 큐브
- 분석 수준 : 복잡한 분석
- 조작 : 읽기/쓰기
- 용량 : 중/소용량
- 속도 : 빠름
- 구축 기간 : 단기
- 개발 주체 : 사용자
- 확장성 : 낮음
- 대상 : 데이터마트

### 2. 관계형 OLAP

- ROLAP(Relational OLAP)
- 관계형 데이터베이스를 이용하여 구축한 데이터웨어하우스로부터 직접 OLAP을 수행
- 저장소 : RDB
- 모델 : 차원 모델링
- 분석 수준 : 간단한 분석
- 조작 : 읽기
- 용량 : 대용량
- 속도 : 느림
- 구축 기간 : 중기
- 개발 주체 : 정보부서
- 확장성 : 높음
- 대상 : 전사적 데이터웨어하우스

### 3. 혼합형 OLAP

- HOLAP(Hybrid OLAP)
- 다차원 데이터의 저장소로 관계형 데이터베이스와 다차원 데이터베이스를 함께 사용
- 저장소 : MDB + RDB
- 모델 : 차원 모델링 + 데이터 큐브
- 분석 수준 : 복잡한 분석
- 조작 : 읽기/쓰기
- 용량 : 대/중용량
- 속도 : 보통
- 구축 기간 : 중기
- 개발 주체 : 정보부서 + 사용자
- 확장성 : 높음
- 대상 : 데이터웨어하우스, 데이터마트

## 3. OLAP 인터페이스

- 드릴-다운 연산(Drill Down) : 요약된 현재 수준보다 보다 상세한 하위 수준으로 단계적으로 데이터를 분석
- 롤-업 연산(Roll-Up) : 상세한 현재 수준보다 요약된 상위 수준 방향으로 단계적으로 집계된 데이터를 분석
- 슬라이스와 다이스 연산(Slice&Dice) : 큐브의 일부분을 원하는 형태로 잘라서 작은 부분 큐브를 만드는 연산
    - 슬라이스 : 주어진 큐브에서 특정한 하나의 차원에 대해서 차원 멤버를 선택함으로써 부분 큐브 만듦
    - 다이스 : 2개 이상의 차원들에 대해 차원 멤버를 선택함으로써 부분 큐브 만듦
- 피봇 연산(Pivot) : 최정 결과 화면에서 현재 분석 중인 데이터의 축을 변경하기 위한 연산
- 드릴-쓰루 연산(Drill-Through) : 큐브 안의 요약된 데이터 수준에서 연관된 상세 데이터로 이동하여 분석
- 드릴-어크로스 연산(Drill-Across) : 현재 검색 중인 큐브에서 새로운 분석 욕구에 따라 다른 큐브로 이동하여 분석

# 4. 데이터베이스 응용

## 1. 분산 데이터베이스

- 물리적으로는 분산된 데이터베이스를 컴퓨터 네트워크로 연결하여 하나의 데이터베이스처럼 사용할 수 있도록 저장/관리하는 데이터베이스
- 분산 처리기 + 통신 네트워크 + 지역 데이터베이스

### 1. 분산 데이터 독립성(Distributed Data Independency)

- 사용자나 응용 프로그램이 전체 데이터의 지역 데이터베이스 분할 여부를 인식하지 않아도 되도록 함
- 위치 투명성(Location Transparency) : 사용자는 데이터의 물리적 저장 위치를 알 필요가 없음
- 중복 투명성(Replication Transparency) : 사용자는 데이터의 사본 존재 ㅇ부나 중복된 데이터의 관리에 신경쓰지 않아도 됨
- 단편화 투명성(Fragmentation Transparency) : DBMS는 릴레이션을 분산이나 중복을 위한 더 작은 최적의 단위인 단편들로 분할하여 관리
- 병행 투명성(Concurrency Transparency) : 여러 트랜잭션이 분산된 데이터를 대상으로 동시에 실행되더라도 DBMS는 사용자에게 이를 숨기면서 정상적인 완료 결과 보장
- 장애 투명성(Failure Transparency) : 일부 시스템이나 통신망이 손상되더라도 DBMS는 사용자에게 이를 숨기면서 정상적인 처리가 이루어지도록 함
- 전역 스키마 : 분산 데이터베이스의 모든 데이터 구조와 제약 조건 정의
- 단편 스키마 : 전역 스키마를 논리적으로 분할한 단편 정의
- 할당 스키마 : 각 단편들을 물리적으로 저장할 지역 위치 정의
- 지역 스키마 : 지역별로 저장하는 데이터의 구조와 제약 조건 정의

### 2. 클라이언트-서버 데이터베이스

- 다양한 컴퓨터 장비가 네트워크를 통해 연결된 분산 컴퓨팅 환경에 대처하기 위한 서비스 구조
- 클라이언트 : 요청을 인식하여 전달
- 서버 : 요청된 서비스를 수행

## 2. 객체지향 데이터베이스(Object-Oriented Database)

- 객체, 속성, 메소드, 클래스 계층, 상속, 복합 객체 등의 핵심 객체지향 개념 지원함으로써 객체 단위로 데이터를 저장, 관리하는 데이터베이스
- 확장성이 있어 새로운 요구사항을 지원하고 데이터의 의미 관계를 표현하기 쉬움
- 데이터 유형 불일치 문제 해결
- 객체 지향 데이터 모델
    - 클래스(Class) : 비슷한 특성을 갖는 객체들을 하나의 공통 그룹으로 정의한 것
    - 객체(Object) : 객체는 고유한 객체 식별자를 가지며 클래스 안에 하나의 인스턴스로 저장
    - 속성(Attribute) : 특정 객체의 상태값
    - 메소드(Method) : 객체의 속성값을 다루기 위한 함수
    - 상속(Inheritance) : 상위 클래스와 하위 클래스 사이의 클래스 계층 관계

## 3. 객체-관계 데이터베이스

- 관계 데이터베이스에 객체지향 데이터 모델의 장점을 접목한 이종 데이터베이스
- 객체-관계 DBMS(ORDBMS, Object Relational DBMS)

## 4. 멀티미디어 데이터베이스

- 텍스트, 그래픽, 이미지, 비디오, 오디오 등이 복합적으로 구성된 다양한 미디어를 효율적으로 저장, 관리하기 위한 데이터베이스
- 비정형 데이터를 효과적으로 저장
- 저장 : 원시 데이터 + 멀티미디어 관련 특성 데이터 + 미디어 내용 저장
- 검색 : 미리 작성된 멀티미디어 데이터의 특성이나 내용에 관한 키워드 검색 기본 제공
- 파일 시스템 활용 방식 : 직접 멀티미디어 데이터를 파일로 저장하고 관리
- 관계 데이터베이스 활용 방식 : 멀티미디어 데이터의 특성이나 명세 관련 데이터는 관계 데이터베이스에 분리
- 관계 데이터베이스의 확장 기능 활용 방식 : 확장된 관계 데이터베이스 기능을 이용하여 일반 데이터와 동일하게 저장
- 객체지향 데이터베이스 활용 방식 : 객체지향 개념을 활용하여 저장

## 5. 공간 데이터베이스

- 다차원 공간 안의 객체와 객체간의 공간 관계를 공간적 특성과 함께 저장하고 관리하는 데이터베이스
- 지리 데이터(Geographic Data) : 위도, 경도, 고도를 갖는 좌표 기반 데이터
- 기하학 데이터(Geometric Data) : 구조 객체의 공간 구성 정보를 2, 3차원 공간 좌표로 표현한 데이터
- 공간 속성 데이터(Spatial Attribute Data) : 지도 및 위성 이미지와 각 공간 객체, 위치에 관련한 각종 특성, 통계 자료 등을 표현한 데이터